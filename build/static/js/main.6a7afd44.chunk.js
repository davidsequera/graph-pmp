(this.webpackJsonppmp=this.webpackJsonppmp||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(52),r=n(0),c=n.n(r),o=n(70),l=n.n(o),i=(n(81),n(82),n(14)),s=Object(r.createContext)({}),u=function(e){var t=e.children,n=Object(r.useState)(localStorage.getItem("token")),a=Object(i.a)(n,2),o=a[0],l=a[1];return c.a.createElement(s.Provider,{value:{jwt:o,setJWT:l}},t)},m=s,d=n(8),p=n(9),v=(n(83),function(){var e=Object(p.g)(),t=Object(r.useContext)(m).setJWT,n=Object(d.useApolloClient)();return c.a.createElement("button",{className:"LogOut",onClick:function(){n.resetStore(),localStorage.removeItem("token"),t(),e.push("/signin")}},"logOut")}),g=(n(93),function(){var e=Object(r.useContext)(m).jwt;return c.a.createElement("header",{className:"component-container header",id:"Header"},c.a.createElement("span",{className:"header-log"}),c.a.createElement("div",{className:"header-title"},c.a.createElement("h2",{className:"header-text"},"CURSO PMP")),c.a.createElement("div",{className:"header-log"},e?c.a.createElement(v,null):c.a.createElement("span",{className:"header-log"})))}),b=n(42),f=n(43),E=n(47),h=n(46),O=(n(94),function(e){Object(E.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return c.a.createElement("footer",{className:"component-container footer",id:"Footer"},c.a.createElement("div",{className:"footer-container"},c.a.createElement("p",{className:"footer-text"},"\xa9 2020 - Curso PMP ")))}}]),n}(c.a.Component));var j=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(g,null),c.a.createElement("div",{className:"Layout-container",id:"Layout"},e.children),c.a.createElement(O,null))},N=n(25),y=(n(95),function(e){var t=Object(r.useState)(void 0),n=Object(i.a)(t,2),a=n[0],o=n[1],l=Object(r.useState)(function(e){var t=e.viewed;return t=(t=t.filter((function(e){return!1!==e.viewed}))).map((function(e){return e.lesson_id}))}(e)),s=Object(i.a)(l,2),u=s[0],m=s[1];return c.a.createElement("ul",{className:"component-container",id:"LessonList"},e.chapters.map((function(t){return c.a.createElement("li",{className:"chapter",id:t.name,key:t.id},c.a.createElement("div",{className:"chapter-container"},c.a.createElement("div",{role:"button",className:"chapter-button",onClick:function(){a===t.name?o(void 0):o(t.name)}},c.a.createElement("h2",{className:"chapter-text "},t.name),c.a.createElement("div",{className:"progress-dot"},c.a.createElement("div",{className:t.lessons.some((function(e){return u.includes(e.id)}))?"progress-ball active-ball":"progress-ball inactive-ball"},c.a.createElement("div",{className:"progress-mini-ball"}))))),c.a.createElement("ul",{className:a===t.name?"lesson-container":" hidden"},t.lessons?t.lessons.map((function(t){return c.a.createElement("li",{className:"lesson",id:t.id,key:t.id},c.a.createElement("button",{onClick:function(){e.videoChanger(t.link)},className:"lesson-link"},c.a.createElement("h4",{className:"lesson-text"},t.name)),c.a.createElement("div",{className:"progress-dot"},c.a.createElement("button",{onClick:function(){return function(t){var n=u.filter((function(e){return e!==t}));u.includes(t)?(m(n),e.viewedHandler(t,!1)):u.includes(t)?console.error("Unable to Commit Lesson Viewed"):(n.unshift(t),m(n),e.viewedHandler(t,!0))}(t.id)},className:u.includes(t.id)?"progress-ball active-ball":"progress-ball inactive-ball"},c.a.createElement("div",{className:"progress-mini-ball"}))))})):console.error("".concat(t.name," Lecci\xf3n no encontrada"))))})))}),I=(n(96),function(e){return c.a.createElement("div",{className:"Video",id:"Video"},c.a.createElement("div",{className:"video-container"},c.a.createElement("div",{className:"course-video"},c.a.createElement("video",{className:"theVideo",controls:!0,controlsList:"nodownload",src:e.video}))))}),w=(n(97),n(74)),S=n.n(w),C=n(44),k=n.n(C);n(98);var x=function(){return c.a.createElement("div",{className:"Loading"},c.a.createElement("div",{className:"Loading-main"},c.a.createElement("div",null,c.a.createElement("img",{alt:"logo PMP",src:k.a,className:"Loading-logo"}))))};n(99);var _=function(){return c.a.createElement("div",{className:"Page-container",id:"NotFound"},c.a.createElement("div",{className:"NotFound-main"},c.a.createElement("h1",{className:"App-title"},"404: Not Found")))};function P(){var e=Object(N.a)(["\n  mutation createViewed($type: lessonViewedInput) {\n    lessonViewed(input: $type) {\n      id\n      user_id\n      lesson_id\n      viewed\n    }\n  }\n"]);return P=function(){return e},e}function U(){var e=Object(N.a)(["\nquery users{\n  user{\n    id\n    name\n    lessons{\n      id\n      user_id\n      lesson_id\n      viewed\n    }\n  }\n}\n"]);return U=function(){return e},e}function L(){var e=Object(N.a)(["\n  query Chapters($chapterId: ID!) {\n    chapters(course_id: $chapterId) {\n      id\n      name\n      lessons {\n        id\n        name\n        link\n      }\n    }\n  }\n"]);return L=function(){return e},e}var $=Object(d.gql)(L()),M=Object(d.gql)(U()),F=Object(d.gql)(P()),R=function(){var e=Object(r.useState)(S.a),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(d.useQuery)($,{variables:{chapterId:"1"}}),l=o.client,s=o.loading,u=o.error,m=o.data,p=Object(d.useQuery)(M),v=Object(d.useMutation)(F),g=Object(i.a)(v,1)[0];return Object(r.useEffect)((function(){return function(){l.stop()}})),s||p.loading?c.a.createElement(x,null):u?c.a.createElement(_,null):c.a.createElement("div",{className:"Page-container",id:"Course"},c.a.createElement("div",{className:"courses"},c.a.createElement(I,{video:n}),c.a.createElement(y,{videoChanger:function(e){a(e)},chapters:m.chapters,viewed:p.data.user.lessons,viewedHandler:function(e,t){var n={user_id:p.data.user.id,lesson_id:e,viewed:t};g({variables:{type:n}})}})))},q=n(31),V=n.n(q),J=n(45),W=(n(101),function(e){var t=Object(r.useState)(e),n=Object(i.a)(t,2),a=n[0],c=n[1];return{value:a,onChange:function(e){return c(e.target.value)}}}),H=(n(102),function(e){return c.a.createElement("div",{className:"UserInput_item",id:e.id},c.a.createElement("label",{htmlFor:""},e.title),c.a.createElement("input",Object.assign({type:e.type},e.name)))});function T(){var e=Object(N.a)(["\n  mutation logIn($type: signInInput) {\n    signIn(input: $type) {\n      auth\n      body\n    }\n  }\n"]);return T=function(){return e},e}function A(){var e=Object(N.a)(["\n  mutation signUp($type: signUpInput) {\n    signUp(input: $type) {\n      id\n      name\n      email\n      password\n    }\n  }\n"]);return A=function(){return e},e}var B=Object(d.gql)(A()),D=Object(d.gql)(T()),Q=function(){var e=Object(d.useMutation)(B),t=Object(i.a)(e,1)[0],n=Object(d.useMutation)(D),a=Object(i.a)(n,2),o=a[0],l=a[1],s=l.client,u=l.data,v=l.error,g=Object(r.useContext)(m).setJWT,b=W(""),f=W(""),E=W(""),h=Object(p.g)();function O(){return(O=Object(J.a)(V.a.mark((function e(n){var a,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={name:b.value,email:f.value,password:E.value},r={email:f.value,password:E.value},n.preventDefault(),console.log(a),e.prev=4,e.next=7,t({variables:{type:a}});case 7:return e.next=9,o({variables:{type:r}});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log("Not match");case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}if(u&&u.signIn.auth){s.resetStore();var j=u.signIn.body;localStorage.removeItem("token"),localStorage.setItem("token",j),g(localStorage.getItem("token")),h.push("/")}return c.a.createElement("div",{className:"SignUpComponent_container",id:"Form"},c.a.createElement("form",{className:"SignUpComponent_form",id:"theForm",onSubmit:function(e){return O.apply(this,arguments)},action:""},c.a.createElement("h1",{className:"SignInComponent_Title title"},"Registrate"),c.a.createElement(H,{id:"2",title:"Name",type:"text",name:b}),c.a.createElement(H,{id:"2",title:"Email",type:"email",name:f}),c.a.createElement(H,{id:"2",title:"password",type:"password",name:E}),c.a.createElement("button",{className:"button",id:"SignUpComponent_button"},"Sign Up"),v&&c.a.createElement("p",null,"ERROR")))},z=function(e){Object(E.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"Page-container",id:"SingUp"},c.a.createElement("div",{className:"singUp"},c.a.createElement(Q,null)))}}]),n}(c.a.Component),G=(n(103),n(28));function K(){var e=Object(N.a)(["\n  mutation logIn($type: signInInput) {\n    signIn(input: $type) {\n      auth\n      body\n    }\n  }\n"]);return K=function(){return e},e}var X=Object(d.gql)(K()),Y=function(e){var t=W("david@gmail.com"),n=W("root"),a=Object(d.useMutation)(X),o=Object(i.a)(a,2),l=o[0],s=o[1],u=s.client,v=s.data,g=s.error,b=Object(r.useContext)(m).setJWT;var f=Object(p.g)(),E=function(){var e=Object(J.a)(V.a.mark((function e(a){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={email:t.value,password:n.value},a.preventDefault();try{l({variables:{type:r}})}catch(a){console.log("Not match")}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(v&&v.signIn.auth){u.resetStore();var h=v.signIn.body;localStorage.removeItem("token"),localStorage.setItem("token",h),b(localStorage.getItem("token")),f.push("/")}return c.a.createElement("div",{className:"SignInComponent_container",id:"Form"},c.a.createElement("form",{className:"SignInComponent_form",onSubmit:E},c.a.createElement("img",{alt:"logo PMP",src:k.a,className:"SignInComponent_User-logo"}),c.a.createElement(H,{id:"2",title:"Email",type:"email",name:t}),c.a.createElement(H,{id:"34",title:"Password",type:"password",name:n}),c.a.createElement("button",{disabled:!(t.value.length>0&&n.value.length>0),className:"button",id:"SignInComponent_button"},"SIGN IN"),g&&c.a.createElement("p",null,"ERROR")),c.a.createElement(G.b,{className:"SignInComponent_SingUp",to:"/signup"},"Registrate"))},Z=function(){return c.a.createElement("div",{className:"Page-container",id:"SignIn"},c.a.createElement("div",{className:"SignIn"},c.a.createElement(Y,null)))};var ee=function(){var e=Object(r.useContext)(m).jwt;return c.a.createElement(G.a,null,c.a.createElement(j,null,c.a.createElement(p.d,null,c.a.createElement(p.b,{exact:!0,path:"/"},e?c.a.createElement(R,null):c.a.createElement(p.a,{to:"/signin"})),c.a.createElement(p.b,{exact:!0,path:"/signin"},c.a.createElement(Z,null)),c.a.createElement(p.b,{exact:!0,path:"/signup",component:z}),c.a.createElement(p.b,{exact:!0,path:"/loading",component:x}),c.a.createElement(p.b,{component:_}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=n(75),ne=Object(d.createHttpLink)({uri:"http://192.168.0.6:".concat(3030,"/api")}),ae=Object(te.a)((function(e,t){var n=t.headers,r=localStorage.getItem("token");return{headers:Object(a.a)(Object(a.a)({},n),{},{authorization:r?"Bearer ".concat(r):""})}})),re=new d.ApolloClient({uri:"http://192.168.0.6:".concat(3030,"/api"),cache:new d.InMemoryCache,link:ae.concat(ne)});l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(d.ApolloProvider,{client:re},c.a.createElement(u,null,c.a.createElement(ee,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},44:function(e,t,n){e.exports=n.p+"static/media/round_logo.5b76e96e.png"},74:function(e,t,n){e.exports=n.p+"static/media/11.785d5fdc.mp4"},76:function(e,t,n){e.exports=n(104)},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.6a7afd44.chunk.js.map